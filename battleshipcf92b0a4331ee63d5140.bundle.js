(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var a=r.getElementsByTagName("script");if(a.length)for(var o=a.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=a[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=(e,t)=>{let r=0,a=t;const o=()=>r===t;return{name:e,get health(){return a},get damage(){return r},hasSunk:o,hit:()=>{let e="";return o()?("The ship you are trying to hit has already sank.","The ship you are trying to hit has already sank."):(r+=1,a-=1,o())}}},r=t("Carrier",5),a=t("Battleship",4),o=t("Destroyer",3),l=t("Submarine",3),n=t("Patrol Boat",2),c=t("Carrier",5),s=t("Battleship",4),u=t("Destroyer",3),i=t("Submarine",3),d=t("Patrol Boat",2),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Computer";const t=(()=>{const e=[],t=10,m=(e,r)=>e>=0&&e<t&&r>=0&&r<t,p=(r,a,o,l)=>{const n="horizontal"===l?1:0,c="vertical"===l?1:0;for(let l=0;l<r;l+=1){const r=o+l*n,s=a+l*c;if(!m(r,s))return!1;for(let a=r-1;a<=r+1;a+=1)for(let r=s-1;r<=s+1;r+=1)if(a>=0&&a<t&&r>=0&&r<t&&"water"!==e[r][a])return!1}return!0};return{createBoard:()=>{for(let r=0;r<t;r+=1){e[r]=[];for(let a=0;a<t;a+=1)e[r][a]="water"}return e},placeShip:(t,r,a,o)=>{const{health:l}=t;if(!p(l,r,a,o))return!1;const n="horizontal"===o?1:0,c="vertical"===o?1:0;for(let o=0;o<l;o+=1){const l=a+o*n;e[r+o*c][l]=t}return!0},receiveAttack:(t,r)=>{const a=e[t][r];return null!==a&&"function"==typeof a.hit?a.hit():(e[t][r]="M","Missed")},allShipsSunk:()=>!!(r.hasSunk()&&a.hasSunk()&&o.hasSunk()&&l.hasSunk()&&n.hasSunk()||c.hasSunk&&s.hasSunk()&&u.hasSunk()&&i.hasSunk()&&d.hasSunk()),canPlaceShip:p,get board(){return e}}})();let m={carrier:c,battleship:s,destroyer:u,submarine:i,patrolBoat:d};return"Computer"!==e&&(m={carrier:r,battleship:a,destroyer:o,submarine:l,patrolBoat:n}),{name:e,board:t,ships:m,createGameBoard:()=>t.createBoard()}},p=e.p+"eb13a96a4329549347ac.svg",h=e.p+"08293310ce926979c03a.svg",y=e.p+"92102e0501c6d462798b.svg",b=e.p+"7598f323f39c8279a997.svg",v=e.p+"21a2bc942cb9bc7cfffa.svg",g=e.p+"cd25b54c04cdfd64d494.svg",S=e.p+"ac7232c258b338e7613e.svg",f=e.p+"2474221a5a20a9badc0e.svg",k=e.p+"987334e9f782cc505f25.png";e.p,document.querySelector(".gh-logo").src=k,(()=>{const e=document.querySelector("#player-board"),t=document.querySelector("#computer-board"),r=m("Player"),a=m(),o=r.createGameBoard(),l=a.createGameBoard();let n=[];const c=[];let s=[],u=!0,i=!0;const d=document.querySelector(".message"),k=[...document.querySelectorAll(".computer-counter>.counter")],q=[...document.querySelectorAll(".player-counter>.counter")],w=document.querySelector(".player-title"),L=document.querySelector(".computer-title"),M=document.querySelector("#user-dialog"),E=document.querySelector(".settings-logo"),$=document.querySelector("#user-form"),x=document.querySelector("#name-one"),C=document.querySelector(".ship-wheel-icon"),B=document.querySelector(".movie-roll-icon"),A=document.querySelector(".power-off-icon"),I=document.querySelector("#place-normal-ships"),P=document.querySelector("#place-ship-dialog"),T=document.querySelector("#place-form"),j=document.querySelector("#reset"),z=document.querySelector("#game-opt"),D=document.querySelector("#cancel"),O=document.querySelector("#place-random-ships"),G=document.querySelector("#reset-game"),H=document.querySelectorAll(".game-controllers>button");E.src=v,C.src=g,B.src=S,A.src=f,M.showModal(),j.addEventListener("click",(()=>{x.value=""})),$.addEventListener("submit",(()=>{if("playerVsComputer"===z.value){for(let e=0;e<H.length;e+=1)H[e].style.opacity="1",H[e].style.transform="translateY(0)";w.textContent=x.value,r.name=x.value,L.textContent=a.name,d.textContent=`${x.value} place your ships please`,d.style.fontSize="1.8rem"}})),I.addEventListener("click",(()=>{P.showModal()}));const W=e=>{const t=Object.values(e.ships);let r=[],a=[];const o=["horizontal","vertical"];let l=[];for(let e=0;e<t.length;e+=1)r.push(Math.floor(10*Math.random())),a.push(Math.floor(10*Math.random())),l.push(o[Math.floor(2*Math.random())]);t.forEach(((t,n)=>{for(;!0!==e.board.canPlaceShip(t.health,r[n],a[n],l[n]);)r=[],a=[],l=[],r[n]=Math.floor(10*Math.random()),a[n]=Math.floor(10*Math.random()),l[n]=o[Math.floor(2*Math.random())];e.board.placeShip(t,r[n],a[n],l[n])}))},F=new Set;for(;F.size<100;){const e=Math.floor(100*Math.random());F.add(`${e}`)}const N=Array.from(F).map((e=>+e)),V=l=>{if(l.stopPropagation(),d.textContent=`${a.name}'s turn!`,l.target.closest(".water")){const a=+l.target.getAttribute("x"),n=+l.target.getAttribute("y");if(r.board.receiveAttack(a,n),"M"===o[a][n])d.textContent=`${r.name}'s turn!`,i=!1,l.target.style.backgroundImage="",l.target.style.backgroundImage=`url(${y})`,l.target.disabled=!0;else{const t=o[a][n],c=Object.values(r.ships).indexOf(t);"Carrier"!==t.name&&"Battleship"!==t.name&&"Destroyer"!==t.name&&"Submarine"!==t.name&&"Patrol Boat"!==t.name||([...q[c].children][t.health].style.backgroundColor="red"),i=!0,l.target.style.backgroundImage="",l.target.style.backgroundImage=`url(${b})`,l.target.disabled=!0,setTimeout((()=>{[...e.children][N.shift()].click()}),1e3)}i?e.addEventListener("click",V):(e.removeEventListener("click",V),t.addEventListener("click",Y))}r.board.allShipsSunk()&&(d.textContent=`${a.name} Wins!`,t.removeEventListener("click",Y),e.removeEventListener("click",V))},Y=o=>{if(o.stopPropagation(),O.disabled=!0,o.target.closest(".water")){const n=+o.target.getAttribute("x"),c=+o.target.getAttribute("y");if(a.board.receiveAttack(n,c),"M"!==l[n][c]){const s=l[n][c],i=Object.values(a.ships).indexOf(s);return"Carrier"!==s.name&&"Battleship"!==s.name&&"Destroyer"!==s.name&&"Submarine"!==s.name&&"Patrol Boat"!==s.name||([...k[i].children][s.damage-1].style.backgroundColor="red"),u=!0,o.target.style.backgroundImage="",o.target.style.backgroundImage=` url(${b})`,o.target.disabled=!0,void(a.board.allShipsSunk()&&(d.textContent=`${r.name} Wins!`,e.removeEventListener("click",V),t.removeEventListener("click",Y)))}d.textContent=`${a.name}'s turn!`,u=!1,o.target.style.backgroundImage="",o.target.style.backgroundImage=` url(${y})`,o.target.disabled=!0,u?t.addEventListener("click",Y):(t.removeEventListener("click",Y),e.addEventListener("click",V),setTimeout((()=>{[...e.children][N.shift()].click()}),1e3))}},J=()=>{n=[],e.innerHTML="",s=[];for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)n.push(o[e][t]),s.push([e,t]);for(let t=0;t<100;t+=1){const r=document.createElement("button");"water"===n[t]&&(r.classList.add("water"),r.style.backgroundImage=` url(${p})`),"object"==typeof n[t]&&(r.classList.add("water"),r.style.backgroundImage=` url(${h})`),"M"===n[t]&&(r.classList.add("water"),r.style.backgroundImage=`url(${p})`),e.appendChild(r),[...e.children][t].setAttribute("x",s[t][0]),[...e.children][t].setAttribute("y",s[t][1])}};W(a),(()=>{e.innerHTML="",t.innerHTML="";for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)n.push(o[e][t]),c.push(l[e][t]),s.push([e,t]);for(let r=0;r<100;r+=1){const a=document.createElement("button"),o=document.createElement("button");"water"===n[r]&&(a.classList.add("water"),a.style.backgroundImage=` url(${p})`),"object"==typeof n[r]&&(a.classList.add("water"),a.style.backgroundImage=` url(${h})`),"M"===n[r]&&(a.classList.add("water"),a.style.backgroundImage=`url(${p})`),"water"===c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),"object"==typeof c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),"M"===c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),e.append(a),t.append(o),[...e.children][r].setAttribute("x",s[r][0]),[...e.children][r].setAttribute("y",s[r][1]),[...t.children][r].setAttribute("x",s[r][0]),[...t.children][r].setAttribute("y",s[r][1])}})(),O.addEventListener("click",(()=>{I.disabled=!0;for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)o[e][t]="water";W(r),J(),d.textContent=`${r.name}'s turn!`,t.addEventListener("click",Y)})),T.addEventListener("submit",(e=>{const a=document.querySelector("#carrier-x"),l=document.querySelector("#carrier-y"),n=document.querySelector("#carrier-orientation"),c=document.querySelector("#battleship-x"),s=document.querySelector("#battleship-y"),u=document.querySelector("#battleship-orientation"),i=document.querySelector("#destroyer-x"),m=document.querySelector("#destroyer-y"),p=document.querySelector("#destroyer-orientation"),h=document.querySelector("#submarine-x"),y=document.querySelector("#submarine-y"),b=document.querySelector("#submarine-orientation"),v=document.querySelector("#patrol-x"),g=document.querySelector("#patrol-y"),S=document.querySelector("#patrol-orientation");if(!0===r.board.placeShip(r.ships.carrier,+a.value-1,+l.value,n.value)&&!0===r.board.placeShip(r.ships.battleship,+c.value-1,+s.value,u.value)&&!0===r.board.placeShip(r.ships.destroyer,+i.value-1,+m.value,p.value)&&!0===r.board.placeShip(r.ships.submarine,+h.value-1,+y.value,b.value)&&!0===r.board.placeShip(r.ships.patrolBoat,+v.value-1,+g.value,S.value))r.board.placeShip(r.ships.carrier,+a.value-1,+l.value,n.value),r.board.placeShip(r.ships.battleship,+c.value-1,+s.value,u.value),r.board.placeShip(r.ships.destroyer,+i.value-1,+m.value,p.value),r.board.placeShip(r.ships.submarine,+h.value-1,+y.value,b.value),r.board.placeShip(r.ships.patrolBoat,+v.value-1,+g.value,S.value),I.disabled=!0,d.textContent=`${r.name}'s turn!`,J(),O.disabled=!0,t.addEventListener("click",Y);else{e.preventDefault(),alert("Bad positions try again !"),a.value="",l.value="",n.value="",c.value="",s.value="",u.value="",i.value="",m.value="",p.value="",h.value="",y.value="",b.value="",v.value="",g.value="",S.value="";for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)o[e][t]="water"}})),D.addEventListener("click",(()=>{P.close()})),G.addEventListener("click",(()=>{window.location.reload()}))})()})();
//# sourceMappingURL=battleshipcf92b0a4331ee63d5140.bundle.js.map