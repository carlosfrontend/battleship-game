(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var a=r.getElementsByTagName("script");if(a.length)for(var o=a.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=a[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=(e,t)=>{let r=0,a=t;const o=()=>r===t;return{name:e,get health(){return a},get damage(){return r},hasSunk:o,hit:()=>{let e="";return o()?("The ship you are trying to hit has already sank.","The ship you are trying to hit has already sank."):(r+=1,a-=1,o())}}},r=t("Carrier",5),a=t("Battleship",4),o=t("Destroyer",3),n=t("Submarine",3),l=t("Patrol Boat",2),c=t("Carrier",5),s=t("Battleship",4),u=t("Destroyer",3),i=t("Submarine",3),d=t("Patrol Boat",2),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Computer";const t=(()=>{const e=[],t=10,m=(e,r)=>e>=0&&e<t&&r>=0&&r<t,p=(r,a,o,n)=>{const l="horizontal"===n?1:0,c="vertical"===n?1:0;for(let n=0;n<r;n+=1){const r=o+n*l,s=a+n*c;if(!m(r,s))return!1;for(let a=r-1;a<=r+1;a+=1)for(let r=s-1;r<=s+1;r+=1)if(a>=0&&a<t&&r>=0&&r<t&&"water"!==e[r][a])return!1}return!0};return{createBoard:()=>{for(let r=0;r<t;r+=1){e[r]=[];for(let a=0;a<t;a+=1)e[r][a]="water"}return e},placeShip:(t,r,a,o)=>{const{health:n}=t;if(!p(n,r,a,o))return!1;const l="horizontal"===o?1:0,c="vertical"===o?1:0;for(let o=0;o<n;o+=1){const n=a+o*l;e[r+o*c][n]=t}return!0},receiveAttack:(t,r)=>{const a=e[t][r];return null!==a&&"function"==typeof a.hit?a.hit():(e[t][r]="M","Missed")},allShipsSunk:()=>!!(r.hasSunk()&&a.hasSunk()&&o.hasSunk()&&n.hasSunk()&&l.hasSunk()||c.hasSunk&&s.hasSunk()&&u.hasSunk()&&i.hasSunk()&&d.hasSunk()),canPlaceShip:p,get board(){return e}}})();let m={carrier:c,battleship:s,destroyer:u,submarine:i,patrolBoat:d};return"Computer"!==e&&(m={carrier:r,battleship:a,destroyer:o,submarine:n,patrolBoat:l}),{name:e,board:t,ships:m,createGameBoard:()=>t.createBoard()}},p=e.p+"eb13a96a4329549347ac.svg",h=e.p+"08293310ce926979c03a.svg",y=e.p+"92102e0501c6d462798b.svg",b=e.p+"7598f323f39c8279a997.svg",v=e.p+"21a2bc942cb9bc7cfffa.svg",g=e.p+"cd25b54c04cdfd64d494.svg",S=e.p+"ac7232c258b338e7613e.svg",f=e.p+"2474221a5a20a9badc0e.svg",k=e.p+"987334e9f782cc505f25.png";document.querySelector(".gh-logo").src=k,(()=>{const e=document.querySelector("#player-board"),t=document.querySelector("#computer-board"),r=m("Player"),a=m(),o=r.createGameBoard(),n=a.createGameBoard();let l=[];const c=[];let s=[],u=!0,i=!0;const d=document.querySelector(".message"),k=[...document.querySelectorAll(".computer-counter>.counter")],q=[...document.querySelectorAll(".player-counter>.counter")],w=document.querySelector(".player-title"),L=document.querySelector(".computer-title"),E=document.querySelector("#user-dialog"),M=document.querySelector(".settings-logo"),x=document.querySelector("#user-form"),$=document.querySelector("#name-one"),C=document.querySelector(".ship-wheel-icon"),A=document.querySelector(".movie-roll-icon"),B=document.querySelector(".power-off-icon"),I=document.querySelector("#place-normal-ships"),P=document.querySelector("#place-ship-dialog"),T=document.querySelector("#place-form"),j=document.querySelector("#reset"),D=document.querySelector("#game-opt"),O=document.querySelector("#cancel"),z=document.querySelector("#place-random-ships"),G=document.querySelector("#reset-game"),H=document.querySelectorAll(".game-controllers>button");M.src=v,C.src=g,A.src=S,B.src=f,document.addEventListener("DOMContentLoaded",(()=>{const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="center",e.style.height="100vh",e.style.width="100%",e.style.position="absolute",e.style.background="white",e.style.top="0",e.style.alignItems="center",e.setAttribute("id","onlyDesktop"),window.innerWidth<1024?(document.body.append(e),e.textContent="You can play on your laptop or PC."):E.showModal()})),j.addEventListener("click",(()=>{$.value=""})),x.addEventListener("submit",(()=>{if("playerVsComputer"===D.value){for(let e=0;e<H.length;e+=1)H[e].style.opacity="1",H[e].style.transform="translateY(0)";w.textContent=$.value,r.name=$.value,L.textContent=a.name,d.textContent=`${$.value} place your ships please`,d.style.fontSize="1.8rem"}})),I.addEventListener("click",(()=>{P.showModal()}));const W=e=>{const t=Object.values(e.ships);let r=[],a=[];const o=["horizontal","vertical"];let n=[];for(let e=0;e<t.length;e+=1)r.push(Math.floor(10*Math.random())),a.push(Math.floor(10*Math.random())),n.push(o[Math.floor(2*Math.random())]);t.forEach(((t,l)=>{for(;!0!==e.board.canPlaceShip(t.health,r[l],a[l],n[l]);)r=[],a=[],n=[],r[l]=Math.floor(10*Math.random()),a[l]=Math.floor(10*Math.random()),n[l]=o[Math.floor(2*Math.random())];e.board.placeShip(t,r[l],a[l],n[l])}))},Y=new Set;for(;Y.size<100;){const e=Math.floor(100*Math.random());Y.add(`${e}`)}const F=Array.from(Y).map((e=>+e)),N=n=>{if(n.stopPropagation(),d.textContent=`${a.name}'s turn!`,n.target.closest(".water")){const a=+n.target.getAttribute("x"),l=+n.target.getAttribute("y");if(r.board.receiveAttack(a,l),"M"===o[a][l])d.textContent=`${r.name}'s turn!`,i=!1,n.target.style.backgroundImage="",n.target.style.backgroundImage=`url(${y})`,n.target.disabled=!0;else{const t=o[a][l],c=Object.values(r.ships).indexOf(t);"Carrier"!==t.name&&"Battleship"!==t.name&&"Destroyer"!==t.name&&"Submarine"!==t.name&&"Patrol Boat"!==t.name||([...q[c].children][t.health].style.backgroundColor="red"),i=!0,n.target.style.backgroundImage="",n.target.style.backgroundImage=`url(${b})`,n.target.disabled=!0,setTimeout((()=>{[...e.children][F.shift()].click()}),1e3)}i?e.addEventListener("click",N):(e.removeEventListener("click",N),t.addEventListener("click",V))}r.board.allShipsSunk()&&(d.textContent=`${a.name} Wins!`,t.removeEventListener("click",V),e.removeEventListener("click",N))},V=o=>{if(o.stopPropagation(),z.disabled=!0,o.target.closest(".water")){const l=+o.target.getAttribute("x"),c=+o.target.getAttribute("y");if(a.board.receiveAttack(l,c),"M"!==n[l][c]){const s=n[l][c],i=Object.values(a.ships).indexOf(s);return"Carrier"!==s.name&&"Battleship"!==s.name&&"Destroyer"!==s.name&&"Submarine"!==s.name&&"Patrol Boat"!==s.name||([...k[i].children][s.damage-1].style.backgroundColor="red"),u=!0,o.target.style.backgroundImage="",o.target.style.backgroundImage=` url(${b})`,o.target.disabled=!0,void(a.board.allShipsSunk()&&(d.textContent=`${r.name} Wins!`,e.removeEventListener("click",N),t.removeEventListener("click",V)))}d.textContent=`${a.name}'s turn!`,u=!1,o.target.style.backgroundImage="",o.target.style.backgroundImage=` url(${y})`,o.target.disabled=!0,u?t.addEventListener("click",V):(t.removeEventListener("click",V),e.addEventListener("click",N),setTimeout((()=>{[...e.children][F.shift()].click()}),1e3))}},J=()=>{l=[],e.innerHTML="",s=[];for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)l.push(o[e][t]),s.push([e,t]);for(let t=0;t<100;t+=1){const r=document.createElement("button");"water"===l[t]&&(r.classList.add("water"),r.style.backgroundImage=` url(${p})`),"object"==typeof l[t]&&(r.classList.add("water"),r.style.backgroundImage=` url(${h})`),"M"===l[t]&&(r.classList.add("water"),r.style.backgroundImage=`url(${p})`),e.appendChild(r),[...e.children][t].setAttribute("x",s[t][0]),[...e.children][t].setAttribute("y",s[t][1])}};W(a),(()=>{e.innerHTML="",t.innerHTML="";for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)l.push(o[e][t]),c.push(n[e][t]),s.push([e,t]);for(let r=0;r<100;r+=1){const a=document.createElement("button"),o=document.createElement("button");"water"===l[r]&&(a.classList.add("water"),a.style.backgroundImage=` url(${p})`),"object"==typeof l[r]&&(a.classList.add("water"),a.style.backgroundImage=` url(${h})`),"M"===l[r]&&(a.classList.add("water"),a.style.backgroundImage=`url(${p})`),"water"===c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),"object"==typeof c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),"M"===c[r]&&(o.classList.add("water"),o.style.backgroundImage=`url(${p})`),e.append(a),t.append(o),[...e.children][r].setAttribute("x",s[r][0]),[...e.children][r].setAttribute("y",s[r][1]),[...t.children][r].setAttribute("x",s[r][0]),[...t.children][r].setAttribute("y",s[r][1])}})(),z.addEventListener("click",(()=>{I.disabled=!0;for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)o[e][t]="water";W(r),J(),d.textContent=`${r.name}'s turn!`,t.addEventListener("click",V)})),T.addEventListener("submit",(e=>{const a=document.querySelector("#carrier-x"),n=document.querySelector("#carrier-y"),l=document.querySelector("#carrier-orientation"),c=document.querySelector("#battleship-x"),s=document.querySelector("#battleship-y"),u=document.querySelector("#battleship-orientation"),i=document.querySelector("#destroyer-x"),m=document.querySelector("#destroyer-y"),p=document.querySelector("#destroyer-orientation"),h=document.querySelector("#submarine-x"),y=document.querySelector("#submarine-y"),b=document.querySelector("#submarine-orientation"),v=document.querySelector("#patrol-x"),g=document.querySelector("#patrol-y"),S=document.querySelector("#patrol-orientation");if(!0===r.board.placeShip(r.ships.carrier,+a.value-1,+n.value,l.value)&&!0===r.board.placeShip(r.ships.battleship,+c.value-1,+s.value,u.value)&&!0===r.board.placeShip(r.ships.destroyer,+i.value-1,+m.value,p.value)&&!0===r.board.placeShip(r.ships.submarine,+h.value-1,+y.value,b.value)&&!0===r.board.placeShip(r.ships.patrolBoat,+v.value-1,+g.value,S.value))r.board.placeShip(r.ships.carrier,+a.value-1,+n.value,l.value),r.board.placeShip(r.ships.battleship,+c.value-1,+s.value,u.value),r.board.placeShip(r.ships.destroyer,+i.value-1,+m.value,p.value),r.board.placeShip(r.ships.submarine,+h.value-1,+y.value,b.value),r.board.placeShip(r.ships.patrolBoat,+v.value-1,+g.value,S.value),I.disabled=!0,d.textContent=`${r.name}'s turn!`,J(),z.disabled=!0,t.addEventListener("click",V);else{e.preventDefault(),alert("Bad positions try again !"),a.value="",n.value="",l.value="",c.value="",s.value="",u.value="",i.value="",m.value="",p.value="",h.value="",y.value="",b.value="",v.value="",g.value="",S.value="";for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)o[e][t]="water"}})),O.addEventListener("click",(()=>{P.close()})),G.addEventListener("click",(()=>{window.location.reload()}))})()})();
//# sourceMappingURL=battleshipa76cb1dee3372943113d.bundle.js.map